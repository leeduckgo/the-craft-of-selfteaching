<html>
    <head>
        <title>
        猜数字
        </title>
    </head>
    <body>
        <!-- 输入 s 猜小，输入 b 猜大：<br>
        <input id="wager" type="text" /> -->
        <button onclick="guess_num(this)" id="s">小</button>
        <button onclick="guess_num(this)" id="b">大</button>
        <div id="log"></div>
        <script>
        var coin_user = 10
        var coin_bot = 10
        var round_of_games = 0;

        function bet(dice, wager, ele){
            if(dice==7){
                ele.innerHTML += "The dice is " + dice + ";<br>DRAW!<br>"
                return 0
            }else if(dice < 7){
                if(wager=="s"){
                    ele.innerHTML += "The dice is " + dice + ";<br>You WIN!<br>"
                    return 1
                }else{
                    ele.innerHTML += "The dice is " + dice + ";<br>You LOST!<br>"
                    return -1
                }
            }else{
                if(wager=="s"){
                    ele.innerHTML += "The dice is " + dice + ";<br>You LOST!<br>"
                    return -1
                }else{
                    ele.innerHTML += "The dice is " + dice + ";<br>You WIN!<br>"
                    return 1
                }
            }
        }
        function guess_num(btn){
            // coin_user, coin_bot,round_of_games 为全局变量，直接使用
            var wager = btn.id
            /*
                Javascript 并没有函数用以生成随机整数，解决方案就是生成[0-1]之间的一个小数后乘以相应的倍数后取整。
                套用这个公式可以生成[a, b]内的随机整数：
                Math.round(Math.random() * (b-a) ) + a
            */
            dice = Math.round(Math.random() * 10 ) + 2;
            if(wager == "b" || wager == "s"){
                ele = document.getElementById("log");
                result = bet(dice, wager, ele);
                coin_user += result;
                coin_bot -= result;
                round_of_games += 1;
                ele.innerHTML += "THE BALANCE: You: " + coin_user + " BOT: " + coin_bot + "<br><br>"
                if(coin_user==0){
                    alert("Woops, you've LOST ALL, and game over!\nYou've played "+
                    round_of_games + " rounds.");
                }else if(coin_bot==0){
                    alert("Woops, the robot's LOST ALL, and game over!\nYou've played "+
                    round_of_games + " rounds.");
                }
            }
        }

        </script>
    </body>     

</html>
